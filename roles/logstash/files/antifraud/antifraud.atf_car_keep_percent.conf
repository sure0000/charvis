input {
    kafka {
        bootstrap_servers => "kafka1:9092,kafka2:9092,kafka3:9092"
        topics => ["antifraud.atf_car_keep_percent_j"]
        client_id => es1
        consumer_threads => 2
        auto_offset_reset => "latest"
        }
}
filter {
    json {
                source => "message"
        }
        mutate {
                remove_field => ["message","schema","[source]","[op]","[ts_ms]","[before]","@version"]
                rename => ["[after][brand]","brand"]
                rename => ["[after][car_series]","car_series"]
                rename => ["[after][create_date]","create_date"]
                rename => ["[after][eighth_year]","eighth_year"]
                rename => ["[after][fifth_year]","fifth_year"]
                rename => ["[after][first_year]","first_year"]
                rename => ["[after][fourth_year]","fourth_year"]
                rename => ["[after][id]","id"]
                rename => ["[after][last_update_date]","last_update_date"]
                rename => ["[after][ninth_year]","ninth_year"]
                rename => ["[after][rawdata_time]","rawdata_time"]
                rename => ["[after][second_year]","second_year"]
                rename => ["[after][seventh_year]","seventh_year"]
                rename => ["[after][sixth_year]","sixth_year"]
                rename => ["[after][tenth_year]","tenth_year"]
                rename => ["[after][third_year]","third_year"]

                convert => ["eighth_year", "float"]
                convert => ["fifth_year", "float"]
                convert => ["first_year", "float"]
                convert => ["fourth_year", "float"]
                convert => ["ninth_year", "float"]
                convert => ["second_year", "float"]
                convert => ["seventh_year", "float"]
                convert => ["sixth_year", "float"]
                convert => ["tenth_year", "float"]
                convert => ["third_year", "float"]
        }
}
output {
     elasticsearch{
            hosts => ["10.1.3.123:9200","10.1.3.124:9200","10.1.3.125:9200"]
            index => "antifraud.atf_car_keep_percent"
            document_type => "doc"
            manage_template => false
            user => elastic
            password => elastic
        }
}

